{
  "info": {
    "name": "Kafka Order Stream API - Fixed Version",
    "description": "Complete API collection for Kafka Order Stream Project - Fixed Console Errors",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/health",
          "host": ["{{base_url}}"],
          "path": ["api", "health"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Status code is 200', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains status', function () {",
              "    pm.expect(pm.response.text()).to.include('API Server is running');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Demo Order 1 (Success)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": \"DEMO-1\",\n  \"product\": \"Assignment Coffee\",\n  \"price\": 19.99\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders",
          "host": ["{{base_url}}"],
          "path": ["api", "orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Order created successfully', function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "pm.test('Response contains success message', function () {",
              "    pm.expect(pm.response.text()).to.include('successfully');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Demo Order 2 (Success)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": \"DEMO-2\",\n  \"product\": \"Professor Espresso\",\n  \"price\": 22.50\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders",
          "host": ["{{base_url}}"],
          "path": ["api", "orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Order created successfully', function () {",
              "    pm.response.to.have.status(201);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Demo Order 3 (Will Retry)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": \"DEMO-3\",\n  \"product\": \"Retry Demonstration Latte\",\n  \"price\": 18.75\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders",
          "host": ["{{base_url}}"],
          "path": ["api", "orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Order processed', function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "console.log('Watch Terminal 1 for retry mechanism demonstration');"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Demo Order 6 (Will Retry)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": \"DEMO-6\",\n  \"product\": \"Second Retry Demo\",\n  \"price\": 25.00\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders",
          "host": ["{{base_url}}"],
          "path": ["api", "orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Order processed', function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "console.log('Watch Terminal 1 for another retry demonstration');"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Demo Order 7 (Will Go to DLQ)",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": \"DEMO-7\",\n  \"product\": \"DLQ Demonstration Order\",\n  \"price\": 30.99\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders",
          "host": ["{{base_url}}"],
          "path": ["api", "orders"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Order processed', function () {",
              "    pm.response.to.have.status(201);",
              "});",
              "",
              "console.log('Watch Terminal 1 for DLQ routing demonstration after retries');"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Create Random Order",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"orderId\": \"ORD-{{$timestamp}}\",\n  \"product\": \"Premium Coffee\",\n  \"price\": {{$randomPrice}}\n}"
        },
        "url": {
          "raw": "{{base_url}}/api/orders",
          "host": ["{{base_url}}"],
          "path": ["api", "orders"]
        }
      },
      "event": [
        {
          "listen": "prerequest",
          "script": {
            "exec": [
              "// Generate random price between 5.00 and 50.00",
              "const randomPrice = (Math.random() * 45 + 5).toFixed(2);",
              "pm.globals.set('randomPrice', randomPrice);"
            ],
            "type": "text/javascript"
          }
        },
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Random order created', function () {",
              "    pm.response.to.have.status(201);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Get Order Statistics",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/orders/stats",
          "host": ["{{base_url}}"],
          "path": ["api", "orders", "stats"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Statistics retrieved', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains statistics', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('totalOrders');",
              "    pm.expect(jsonData).to.have.property('totalValue');",
              "    pm.expect(jsonData).to.have.property('averagePrice');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Get Price Aggregations",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/aggregate",
          "host": ["{{base_url}}"],
          "path": ["api", "aggregate"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Aggregations retrieved', function () {",
              "    pm.response.to.have.status(200);",
              "});",
              "",
              "pm.test('Response contains aggregation data', function () {",
              "    const jsonData = pm.response.json();",
              "    pm.expect(jsonData).to.have.property('runningAverage');",
              "    pm.expect(jsonData).to.have.property('totalOrders');",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    },
    {
      "name": "Get Consumer Output",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{base_url}}/api/consumer-output",
          "host": ["{{base_url}}"],
          "path": ["api", "consumer-output"]
        }
      },
      "event": [
        {
          "listen": "test",
          "script": {
            "exec": [
              "pm.test('Consumer output retrieved', function () {",
              "    pm.response.to.have.status(200);",
              "});"
            ],
            "type": "text/javascript"
          }
        }
      ],
      "response": []
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:35081"
    }
  ]
}

